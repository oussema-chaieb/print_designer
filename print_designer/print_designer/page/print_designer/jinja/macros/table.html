{% macro table(element, send_to_jinja, heightType) -%}
    {%- set heightType = element.get("heightType") -%}
    {%- if settings.get("schema_version") == "1.1.0" -%}
        {%- set heightType = "auto" if element.get("isDynamicHeight", False) else "fixed" -%}
    {%- endif -%}
    {%- set header_style = element.get('headerStyle', {}) -%}
    {%- set body_style = element.get('style', {}) -%}
    {%- set remove_outer_raw = element.get('removeOuterBorder') -%}
    {%- set remove_outer = remove_outer_raw in ['Yes', 'yes', 'TRUE', 'True', 'true', 1, true] -%}
    <table style="position:{%- if heightType != 'fixed' -%}relative{% else %}absolute{%- endif -%}; {%- if heightType == 'fixed' -%}top: {%- else -%}margin-top: {%- endif -%}{{ element.startY }}px; left:{{ element.startX }}px; width:{{ element.width }}px;{%- if heightType != 'fixed' and heightType != 'auto' -%}{%- if heightType == 'auto-min-height' -%}min-{%- endif -%}height:{{ element.height }}px;{%- endif -%} max-width:{{ element.width }}px;" class="table-container printTable {% if remove_outer %}no-outer-border{% endif %} {{ element.classes | join(' ') }}">
            <thead>
            {% if element.columns %}
                <tr>
            {% set header_radius = header_style.get('borderRadius') %}
            {% for column in element.columns%}
                    <th style="{% if column.width %}width: {{column.width}}%; max-width: {{column.width}}%;{%endif%} {{convert_css(header_style)}} border-radius: 0 !important; {% if header_radius %}{% if loop.first %}border-top-left-radius: {{ header_radius }} !important; border-bottom-left-radius: {{ header_radius }} !important;{% endif %}{% if loop.last %}border-top-right-radius: {{ header_radius }} !important; border-bottom-right-radius: {{ header_radius }} !important;{% endif %}{% endif %}{% set headerTopOff = header_style.get('borderTopStyle') in ['none','hidden'] %}{% set headerLeftOff = header_style.get('borderLeftStyle') in ['none','hidden'] %}{% set headerRightOff = header_style.get('borderRightStyle') in ['none','hidden'] %}{% if remove_outer or headerTopOff %}border-top-style: none !important;{% else %}border-top-style: solid !important;{% endif %}border-bottom-style: solid !important;{% if loop.first %}{% if remove_outer or headerLeftOff %}border-left-style: none !important;{% else %}border-left-style: solid !important;{% endif %}{% elif loop.last %}{% if remove_outer or headerRightOff %}border-right-style: none !important;{% else %}border-right-style: solid !important;{% endif %}{% endif %}{%- if column.applyStyleToHeader and column.style -%}{{convert_css(column.style)}}{%- endif -%}">
                    {{ _(column.label) }}
                    </th>
            {% endfor %}
                </tr>
            {% endif %}
            </thead>
            <tbody>
            {% if element.columns %}
            {% for row in doc.get(element.table.fieldname)%}
                <tr>
                    {% set isLastRow = loop.last %}
                {% for column in element.columns%}
                    <td style="{{convert_css(body_style)}}{%if row.idx % 2 == 0 %}{{convert_css(element.altStyle)}}{%endif%}{% set bodyBottomOff = body_style.get('borderBottomStyle') in ['none','hidden'] %}{% set bodyLeftOff = body_style.get('borderLeftStyle') in ['none','hidden'] %}{% set bodyRightOff = body_style.get('borderRightStyle') in ['none','hidden'] %}{% if isLastRow %}{% if remove_outer or bodyBottomOff %}border-bottom-style: none !important;{% else %}border-bottom-style: solid !important; border-bottom-width: {{ body_style.get('borderWidth', '1px') }} !important; border-bottom-color: {{ body_style.get('borderColor', '#000000') }} !important;{% endif %}{% endif %}{% if loop.first %}{% if remove_outer or bodyLeftOff %}border-left-style: none !important;{% else %}border-left-style: solid !important;{% endif %}{% elif loop.last %}{% if remove_outer or bodyRightOff %}border-right-style: none !important;{% else %}border-right-style: solid !important;{% endif %}{% endif %}{%- if column.style -%}{{convert_css(column.style)}}{%- endif -%}">
                {% if column is mapping %}
                    {% for field in column.dynamicContent%}
                        {{ span_tag(field, element, row, send_to_jinja) }}
                    {% endfor %}
            {% endif %}
                    </td>
                {% endfor %}
                </tr>
                {% endfor %}
            {% endif %}
            </tbody>
    </table>
{%- endmacro %}